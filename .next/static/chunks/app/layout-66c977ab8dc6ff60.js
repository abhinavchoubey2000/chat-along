(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{28871:(e,a,t)=>{Promise.resolve().then(t.bind(t,16269)),Promise.resolve().then(t.bind(t,9552)),Promise.resolve().then(t.bind(t,74164)),Promise.resolve().then(t.bind(t,45060)),Promise.resolve().then(t.bind(t,83025)),Promise.resolve().then(t.bind(t,86042)),Promise.resolve().then(t.bind(t,99488)),Promise.resolve().then(t.bind(t,5926)),Promise.resolve().then(t.bind(t,1957)),Promise.resolve().then(t.t.bind(t,19967,23)),Promise.resolve().then(t.bind(t,78361))},74164:(e,a,t)=>{"use strict";t.r(a),t.d(a,{MUIThemeProvider:()=>l});var i=t(95155);t(12115);var s=t(35060),o=t(20457),r=t(45060);function l(e){let{children:a}=e;return(0,i.jsxs)(s.A,{theme:r.theme,children:[(0,i.jsx)(o.Ay,{}),a]})}},45060:(e,a,t)=>{"use strict";t.r(a),t.d(a,{theme:()=>i});let i=(0,t(74799).A)({palette:{primary:{main:"#046af2"},secondary:{main:"#06D001"}}})},83025:(e,a,t)=>{"use strict";t.r(a),t.d(a,{ReceiveMessage:()=>S});var i=t(95155),s=t(83391),o=t(71319),r=t(19347),l=t(12115),n=t(10979),d=t(30562),u=t(9561),m=t(280),c=t(11441),p=t(894),g=t(22282),h=t(6327),y=t(22293);let v=(0,o.Ay)("http://localhost:5000");function f(e){let{senderName:a,senderImage:t,message:o,closeSnackbar:f,userId:D}=e,[I,P]=(0,l.useState)(!1),[S,b]=(0,l.useState)(""),{userData:_}=(0,s.d4)(e=>e.User),x=(0,s.wA)(),w=()=>{let e={senderId:_._id||"",receiverId:D,message:S,image:_.image||{image_url:"",public_id:""},time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})};v.off().emit("sendMessage",e),x((0,r.cE)({receiverId:D,image:_.image||{image_url:"",public_id:""},message:S,time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})),b(""),f()};return(0,i.jsxs)(n.default,{width:300,children:[(0,i.jsxs)(n.default,{children:[(0,i.jsxs)(n.default,{spacing:1,justifyContent:"space-between",direction:"row",children:[(0,i.jsxs)(n.default,{direction:"row",spacing:1,children:[(0,i.jsx)(d.A,{src:t.image_url,sx:{height:20,width:20}}),(0,i.jsx)(u.A,{variant:"caption",sx:{opacity:.7},children:a})]}),(0,i.jsx)(h.A,{onClick:f,sx:{cursor:"pointer"}})]}),(0,i.jsx)(u.A,{noWrap:!1,sx:{marginLeft:3.5,whiteSpace:"normal",overflowWrap:"break-word",wordBreak:"break-word"},variant:"body2",letterSpacing:1,children:o})]}),I?(0,i.jsx)(m.A,{id:"outlined-adornment-message",type:"text",placeholder:"Message",sx:{borderRadius:"30px",color:"white"},size:"small",value:S,onChange:e=>{b(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&w()},endAdornment:(0,i.jsx)(c.A,{position:"end",children:(0,i.jsx)(p.A,{"aria-label":"message",color:"primary",edge:"end",children:(0,i.jsx)(y.A,{})})})}):(0,i.jsxs)(n.default,{direction:"row",py:1,children:[(0,i.jsx)(g.default,{color:"secondary",variant:"text",autoCapitalize:"off",onClick:()=>{P(!0)},sx:{padding:0,margin:0,fontSize:12},children:"Reply"}),(0,i.jsx)(g.default,{variant:"text",autoCapitalize:"off",color:"error",onClick:f,sx:{padding:0,margin:0,fontSize:12},children:"Cancel"})]})]})}var D=t(76046),I=t(56153);let P=(0,o.Ay)("https://chat-along-external-server.onrender.com/");function S(){let e=(0,s.wA)(),{userData:a,allUsersData:t}=(0,s.d4)(e=>e.User),[o,n]=(0,l.useState)(!1),[d,u]=(0,l.useState)({name:"",image:{image_url:"",public_id:""},message:"",id:""}),m=(0,D.usePathname)();return P.off().on("receiveMessage",i=>{if(i.receiverId===a._id){if(!m.startsWith("/chats/")){var s;u({name:(null===(s=t.find(e=>e._id===i.senderId))||void 0===s?void 0:s.name)||"",image:i.image,message:i.message,id:i.senderId}),n(!0)}e((0,r.BJ)({senderId:i.senderId,image:i.image,time:i.time,message:i.message}))}}),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(I.A,{sx:{width:"80%"},open:o,autoHideDuration:1e4,anchorOrigin:{vertical:"top",horizontal:"right"},message:(0,i.jsx)(f,{senderName:d.name,senderImage:d.image,message:d.message,closeSnackbar:()=>{n(!1)},userId:d.id})})})}},86042:(e,a,t)=>{"use strict";t.r(a),t.d(a,{ReceiveNotification:()=>n});var i=t(95155),s=t(83391),o=t(71319),r=t(19347);let l=(0,o.Ay)("https://chat-along-external-server.onrender.com/");function n(){let e=(0,s.wA)(),{userData:a}=(0,s.d4)(e=>e.User);return l.off().on("receiveNotification",t=>{t.receiverId===a._id&&t.senderId!==t.receiverId&&e((0,r.N1)({name:t.senderName,image:t.senderImage,action:t.action,link:t.link}))}),(0,i.jsx)(i.Fragment,{})}},99488:(e,a,t)=>{"use strict";t.r(a),t.d(a,{StoreAllUsersData:()=>n});var i=t(95155),s=t(12115),o=t(83391),r=t(18244),l=t(19347);function n(){let e=(0,o.wA)(),{data:a,isLoading:t}=(0,r.DQ)();return(0,s.useEffect)(()=>{e((0,l.Aj)(t)),!t&&a&&(e((0,l.Xn)(a.data)),e((0,l.Aj)(t)))},[a,t,e]),(0,i.jsx)(i.Fragment,{})}},5926:(e,a,t)=>{"use strict";t.r(a),t.d(a,{StorePublicPosts:()=>n});var i=t(95155),s=t(12115),o=t(83391),r=t(56595),l=t(54388);function n(){let e=(0,o.wA)(),{data:a,isLoading:t}=(0,r.W0)();return(0,s.useEffect)(()=>{e((0,l.Aj)(t)),!t&&a&&(e((0,l.Fn)(a.data)),e((0,l.Aj)(t)))},[a,t,e]),(0,i.jsx)(i.Fragment,{})}},1957:(e,a,t)=>{"use strict";t.r(a),t.d(a,{StoreUserData:()=>n});var i=t(95155),s=t(12115),o=t(83391),r=t(18244),l=t(19347);function n(){let e=(0,o.wA)(),{data:a,isLoading:t}=(0,r.Ll)();return(0,s.useEffect)(()=>{e((0,l.Aj)(t)),!t&&a&&a.data&&(e((0,l.zY)(a.data)),e((0,l.rM)(!0)),e((0,l.Aj)(t)))},[a,t,e]),(0,i.jsx)(i.Fragment,{})}},78361:(e,a,t)=>{"use strict";t.d(a,{ReduxProvider:()=>u});var i=t(95155),s=t(19347),o=t(54388),r=t(56595),l=t(34120);let n=(0,t(72212).U1)({reducer:{User:s.oN.reducer,Post:o.Vr.reducer,[l.dG.reducerPath]:l.dG.reducer,[r.d_.reducerPath]:r.d_.reducer},middleware:e=>e().concat(r.d_.middleware).concat(l.dG.middleware)});var d=t(83391);let u=e=>{let{children:a}=e;return(0,i.jsxs)(d.Kq,{store:n,children:[" ",a]})}},18244:(e,a,t)=>{"use strict";t.d(a,{DQ:()=>i.DQ,IM:()=>i.IM,Iq:()=>i.Iq,Ll:()=>i.Ll,R3:()=>i.R3,VY:()=>i.VY,_L:()=>i._L,gx:()=>i.gx,lJ:()=>i.lJ,og:()=>i.og,oq:()=>i.oq,qB:()=>i.qB,rU:()=>i.rU});var i=t(34120)},56595:(e,a,t)=>{"use strict";t.d(a,{Ar:()=>n,NB:()=>p,Qy:()=>y,UX:()=>c,W0:()=>r,d_:()=>o,sc:()=>l,t0:()=>g});var i=t(39295),s=t(30565);let o=(0,i.xP)({reducerPath:"postApi",baseQuery:(0,s.cw)({baseUrl:"http://localhost:3000"}),endpoints:e=>({login:e.mutation({query:e=>({url:"api/login",method:"POST",body:{email:e.email,password:e.password}})}),signup:e.mutation({query:e=>({url:"/api/signup",method:"POST",body:{email:e.email,password:e.password,name:e.name}})}),logout:e.mutation({query:()=>({url:"api/logout",method:"DELETE"})}),fetchPublicPostsData:e.query({query:()=>"api/get-all-posts"}),uploadImageToCloudinary:e.mutation({query:e=>({url:"https://chat-along-external-server.onrender.com/upload-to-cloudinary",method:"POST",body:e})}),deleteImageFromCloudinary:e.mutation({query:e=>({url:"https://chat-along-external-server.onrender.com/delete-from-cloudinary",method:"POST",body:{public_id:e}})}),createPost:e.mutation({query:e=>({url:"api/create-post",method:"POST",body:{post_image:e.post_image,caption:e.caption,date:e.date}})}),updateLink:e.mutation({query:e=>({url:"api/update-link",method:"PUT",body:{url:e.url,fullname:e.fullname,id:e.id,linkColor:e.linkColor}})}),deletePost:e.mutation({query:e=>({url:"api/delete-post",method:"DELETE",body:{postId:e}})}),likeUnlikePost:e.mutation({query:e=>({url:"api/like-unlike-post",method:"PUT",body:{postId:e}})}),commentPost:e.mutation({query:e=>({url:"api/comment-post",method:"POST",body:{postId:e.postId,comment:e.comment}})})})}),{useFetchPublicPostsDataQuery:r,useLikeUnlikePostMutation:l,useCommentPostMutation:n,useLoginMutation:d,useSignupMutation:u,useLogoutMutation:m,useUploadImageToCloudinaryMutation:c,useDeleteImageFromCloudinaryMutation:p,useCreatePostMutation:g,useUpdateLinkMutation:h,useDeletePostMutation:y}=o},34120:(e,a,t)=>{"use strict";t.d(a,{DQ:()=>l,IM:()=>u,Iq:()=>y,Ll:()=>r,R3:()=>p,VY:()=>D,_L:()=>n,dG:()=>o,gx:()=>I,lJ:()=>v,og:()=>g,oq:()=>d,qB:()=>f,rU:()=>m});var i=t(39295),s=t(30565);let o=(0,i.xP)({reducerPath:"usersApi",baseQuery:(0,s.cw)({baseUrl:"http://localhost:3000"}),endpoints:e=>({login:e.mutation({query:e=>({url:"api/login",method:"POST",body:{username:e.username,password:e.password}})}),checkEmailInDB:e.mutation({query:e=>({url:"api/check-email",method:"POST",body:{email:e}})}),checkUsernameInDB:e.mutation({query:e=>({url:"api/check-username",method:"POST",body:{firstName:e.firstName,phone:e.phone,username:e.username}})}),signup:e.mutation({query:e=>({url:"/api/signup",method:"POST",body:{email:e.email,password:e.password,name:e.name,image:e.image,username:e.username,phone:e.phone}})}),logout:e.mutation({query:()=>({url:"api/logout",method:"DELETE"})}),fetchUserData:e.query({query:()=>"api/get-user-profile"}),fetchAllUsersData:e.query({query:()=>"api/get-all-users"}),followUnfollowUser:e.mutation({query:e=>({url:"api/follow-unfollow-user",method:"PUT",body:{userId:e}})}),addStatus:e.mutation({query:e=>({url:"api/add-status",method:"POST",body:{statusContent:e.statusContent,colorCode:e.colorCode,colorName:e.colorName}})}),editProfile:e.mutation({query:e=>({url:"api/edit-user-profile",method:"PUT",body:{image:e.image,name:e.name,email:e.email,phone:e.phone}})}),deleteStatus:e.mutation({query:e=>({url:"api/delete-status",method:"DELETE",body:{statusId:e}})}),saveMessage:e.mutation({query:e=>({url:"api/save-message",method:"POST",body:{receiverId:e.receiverId,time:e.time,image:e.image,message:e.message}})}),clearMessages:e.mutation({query:e=>({url:"api/clear-messages",method:"POST",body:{receiverId:e}})}),saveNotification:e.mutation({query:e=>({url:"api/save-notification",method:"POST",body:{receiverId:e.receiverId,link:e.link,image:e.image,senderName:e.senderName,action:e.action}})}),clearNotifications:e.mutation({query:()=>({url:"api/clear-notifications",method:"PUT"})})})}),{useFetchUserDataQuery:r,useFetchAllUsersDataQuery:l,useLoginMutation:n,useCheckEmailInDBMutation:d,useCheckUsernameInDBMutation:u,useSignupMutation:m,useLogoutMutation:c,useFollowUnfollowUserMutation:p,useAddStatusMutation:g,useEditProfileMutation:h,useDeleteStatusMutation:y,useSaveMessageMutation:v,useClearMessagesMutation:f,useSaveNotificationMutation:D,useClearNotificationsMutation:I}=o},54388:(e,a,t)=>{"use strict";t.d(a,{Aj:()=>o,Fn:()=>s,VA:()=>r,Vr:()=>i,YH:()=>l,g$:()=>n});let i=(0,t(72212).Z0)({name:"Post",initialState:{postsData:[],loading:!1},reducers:{storePublicPostDataInState:(e,a)=>{e.postsData=a.payload},deletePostFromState:(e,a)=>{e.postsData=e.postsData.filter(e=>e._id!==a.payload)},likeUnlikePostInState:(e,a)=>{var t,i,s,o,r;let l=e.postsData.find(e=>e._id===a.payload.postId);if(null==l?void 0:null===(t=l.likes)||void 0===t?void 0:t.find(e=>e._id===a.payload.likesDetails._id)){let t=null==l?void 0:null===(s=l.likes)||void 0===s?void 0:s.findIndex(e=>e._id===a.payload.likesDetails._id);null===(r=e.postsData.find(e=>e._id===a.payload.postId))||void 0===r||null===(o=r.likes)||void 0===o||o.splice(t||0,1)}else null==l||null===(i=l.likes)||void 0===i||i.push({_id:a.payload.likesDetails._id,image:a.payload.likesDetails.image,name:a.payload.likesDetails.name,username:a.payload.likesDetails.username})},commentPostInState:(e,a)=>{var t;let i=e.postsData.find(e=>e._id===a.payload.postId);null==i||null===(t=i.comments)||void 0===t||t.push({comment:a.payload.commentDetails.comment,userId:{name:a.payload.commentDetails.userId.name,_id:a.payload.commentDetails.userId._id,username:a.payload.commentDetails.userId.username,image:a.payload.commentDetails.userId.image}})},changeLoadingState:(e,a)=>{e.loading=a.payload}}}),{storePublicPostDataInState:s,changeLoadingState:o,deletePostFromState:r,likeUnlikePostInState:l,commentPostInState:n}=i.actions},19347:(e,a,t)=>{"use strict";t.d(a,{$m:()=>n,Aj:()=>v,BJ:()=>u,Jx:()=>r,N1:()=>c,Sl:()=>p,Xn:()=>o,aP:()=>g,cE:()=>d,mF:()=>m,oN:()=>i,rM:()=>l,yQ:()=>h,zY:()=>s});let i=(0,t(72212).Z0)({name:"Users",initialState:{userData:{},allUsersData:[],loading:!0,isAuthenticated:!1,isDialogOpened:!1},reducers:{storeUserDataInState:(e,a)=>{e.userData=a.payload},storeAllUsersDataInState:(e,a)=>{e.allUsersData=a.payload},followUnfollowUserInState:(e,a)=>{var t,i,s,o,r,l,n;let d=null===(t=e.userData.following)||void 0===t?void 0:t.find(e=>e._id===a.payload._id),u=e.allUsersData.find(e=>e._id===a.payload._id);if(d){let t=null===(i=e.userData.following)||void 0===i?void 0:i.findIndex(e=>e._id===a.payload._id);null===(s=e.userData.following)||void 0===s||s.splice(Number(t),1);let l=null==u?void 0:null===(o=u.followers)||void 0===o?void 0:o.find(a=>a._id===e.userData._id);null==u||null===(r=u.followers)||void 0===r||r.splice(Number(l),1)}else null===(l=e.userData.following)||void 0===l||l.push({_id:a.payload._id,name:a.payload.name,image:a.payload.image,username:a.payload.username}),null==u||null===(n=u.followers)||void 0===n||n.push({_id:e.userData._id||"",name:e.userData.name||"",image:e.userData.image||{image_url:"",public_id:""},username:e.userData.username||""})},handleAuthentication:(e,a)=>{e.isAuthenticated=a.payload},handleDialog:(e,a)=>{e.isDialogOpened=a.payload},changeLoadingState:(e,a)=>{e.loading=a.payload},sendMessageInState:(e,a)=>{var t,i;e.userData.chats||(e.userData.chats={}),(null===(t=e.userData.chats)||void 0===t?void 0:t[a.payload.receiverId])||(e.userData.chats[a.payload.receiverId]=[]),null===(i=e.userData.chats)||void 0===i||i[a.payload.receiverId].push({message:a.payload.message,image:a.payload.image,time:a.payload.time,name:"sender",seen:!1})},receiveMessageInState:(e,a)=>{var t,i;e.userData.chats||(e.userData.chats={}),(null===(t=e.userData.chats)||void 0===t?void 0:t[a.payload.senderId])||(e.userData.chats[a.payload.senderId]=[]),null===(i=e.userData.chats)||void 0===i||i[a.payload.senderId].push({message:a.payload.message,image:a.payload.image,time:a.payload.time,name:"receiver",seen:!1})},clearMessagesInState:(e,a)=>{var t;e.userData.chats||(e.userData.chats={}),(null===(t=e.userData.chats)||void 0===t?void 0:t[a.payload])||(e.userData.chats[a.payload]=[]),e.userData.chats[a.payload]=[]},receiveNotificationInState:(e,a)=>{e.userData.notifications||(e.userData.notifications=[]),e.userData.notifications.push({name:a.payload.name,image:a.payload.image,action:a.payload.action,link:a.payload.link})},clearNotificationsInState:e=>{e.userData.notifications=[]},seenMessageInState:(e,a)=>{var t;let i=a.payload;(null===(t=e.userData.chats)||void 0===t?void 0:t[i])&&(e.userData.chats[i][e.userData.chats[i].length-1].seen=!0)},addStatusInState:(e,a)=>{if(e.userData.status){var t,i;null==e||null===(i=e.userData)||void 0===i||i.status.push({statusContent:a.payload.statusContent,colorCode:a.payload.colorCode,colorName:a.payload.colorName,_id:String((null===(t=e.userData.status)||void 0===t?void 0:t.length)+1)})}},deleteStatusInState:(e,a)=>{if(e.userData.status){let t=e.userData.status.findIndex(e=>e._id===a.payload);e.userData.status.splice(Number(t),1)}}}}),{storeUserDataInState:s,storeAllUsersDataInState:o,followUnfollowUserInState:r,handleAuthentication:l,handleDialog:n,sendMessageInState:d,receiveMessageInState:u,clearMessagesInState:m,receiveNotificationInState:c,clearNotificationsInState:p,addStatusInState:g,deleteStatusInState:h,seenMessageInState:y,changeLoadingState:v}=i.actions},19967:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[310,7150,7089,2282,9295,1146,280,2976,1741,8441,1517,7358],()=>a(28871)),_N_E=e.O()}]);