(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1374],{80774:(e,r,a)=>{Promise.resolve().then(a.bind(a,32137))},32137:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>P});var t=a(95155),o=a(12115),i=a(68998),s=a(10979),l=a(9561),n=a(30960),d=a(35901),u=a(48381),m=a(36520);let c=["Basic Info","Credentials","Profile Picture"],p=e=>{let{activeStep:r}=e;return(0,t.jsx)(d.A,{activeStep:r,alternativeLabel:!0,children:c.map((e,r)=>(0,t.jsx)(u.A,{children:(0,t.jsx)(m.A,{children:e})},r))})};var h=a(11881),f=a(22282),g=a(96854);let x=e=>{let{data:r,handleChange:a,checkBasicInfoAndMoveNext:o,errorData:i,isLoading:n}=e;return(0,t.jsxs)(s.default,{py:5,children:[(0,t.jsx)(l.A,{textAlign:"center",sx:{opacity:.7},letterSpacing:1.5,children:"Let us know your name which is gonna be displayed on your profile."}),(0,t.jsxs)(s.default,{children:[(0,t.jsx)(h.A,{label:"First Name",name:"firstName",value:r.firstName,onChange:a,fullWidth:!0,margin:"normal"}),(0,t.jsx)(l.A,{variant:"caption",color:"error",children:i.firstNameError})]}),(0,t.jsxs)(s.default,{children:[(0,t.jsx)(h.A,{label:"Last Name",name:"lastName",value:r.lastName,onChange:a,fullWidth:!0,margin:"normal"}),(0,t.jsx)(l.A,{variant:"caption",color:"error",children:i.lastNameError})]}),(0,t.jsxs)(s.default,{children:[(0,t.jsx)(h.A,{label:"Email",name:"email",type:"email",value:r.email,onChange:a,fullWidth:!0,margin:"normal"}),(0,t.jsx)(l.A,{variant:"caption",color:"error",children:i.emailError})]}),(0,t.jsx)(f.default,{sx:{my:2},variant:"contained",color:"primary",onClick:o,fullWidth:!0,children:n?(0,t.jsx)(g.default,{sx:{color:"white"},size:18}):"Next"})]})},y=e=>{let{data:r,handleChange:a,checkCredentialsAndMoveNext:o,prevStep:i,errorData:n,isLoading:d}=e;return(0,t.jsxs)(s.default,{py:5,children:[(0,t.jsx)(l.A,{textAlign:"center",sx:{opacity:.7},letterSpacing:1.5,children:"Make us remember you and secure your account."}),(0,t.jsxs)(s.default,{children:[(0,t.jsx)(h.A,{label:"Username",name:"username",value:r.username,onChange:a,fullWidth:!0,margin:"normal"}),(0,t.jsx)(l.A,{variant:"caption",color:"error",children:n.usernameError})]}),(0,t.jsxs)(s.default,{children:[(0,t.jsx)(h.A,{label:"Password",name:"password",type:"password",value:r.password,onChange:a,fullWidth:!0,margin:"normal"}),(0,t.jsx)(l.A,{variant:"caption",color:"error",children:n.passwordError})]}),(0,t.jsxs)(s.default,{children:[(0,t.jsx)(h.A,{label:"Phone Number",name:"phone",type:"tel",value:r.phone,onChange:a,fullWidth:!0,margin:"normal"}),(0,t.jsx)(l.A,{variant:"caption",color:"error",children:n.phoneError})]}),(0,t.jsxs)(s.default,{direction:"row",spacing:2,sx:{my:2},children:[(0,t.jsx)(f.default,{variant:"outlined",color:"primary",onClick:i,fullWidth:!0,children:"Previous"}),(0,t.jsx)(f.default,{variant:"contained",color:"primary",onClick:o,fullWidth:!0,sx:{alignItems:"center",gap:1},children:d?(0,t.jsx)(g.default,{sx:{color:"white"},size:18}):"Next"})]})]})};var A=a(73229),E=a(894);let w=e=>{let{handleFileChange:r,handleSubmit:a,prevStep:i,data:n,isLoading:d}=e,u=(0,o.useRef)(null);return(0,t.jsxs)(s.default,{alignItems:"center",spacing:2,width:"100%",py:5,children:[(0,t.jsx)(l.A,{textAlign:"center",sx:{opacity:.7},letterSpacing:1.5,children:"Add a profile picture above your name to make your account stand out."}),(0,t.jsxs)(s.default,{direction:"row",spacing:2,alignItems:"center",children:[(0,t.jsxs)(s.default,{children:[(0,t.jsx)("img",{height:150,width:150,style:{borderRadius:"50%"},src:n.profilePicture?URL.createObjectURL(n.profilePicture):"https://i.pinimg.com/originals/59/af/9c/59af9cd100daf9aa154cc753dd58316d.jpg",alt:"Profile Picture"}),(0,t.jsx)(l.A,{textAlign:"center",letterSpacing:1.5,children:"".concat(n.firstName," ").concat(n.lastName)})]}),(0,t.jsx)("input",{type:"file",name:"profilePicture",ref:u,style:{display:"none"},onChange:r}),(0,t.jsx)(E.A,{onClick:()=>{var e;null===(e=u.current)||void 0===e||e.click()},sx:{height:80,width:80},children:(0,t.jsx)(A.A,{sx:{height:50,width:50}})})]}),(0,t.jsxs)(s.default,{direction:"row",width:"100%",spacing:2,children:[(0,t.jsx)(f.default,{variant:"outlined",color:"primary",onClick:i,fullWidth:!0,children:"Previous"}),(0,t.jsx)(f.default,{variant:"contained",color:"primary",onClick:a,fullWidth:!0,children:n.profilePicture?d?(0,t.jsx)(g.default,{sx:{color:"white"},size:18}):"Finish":d?(0,t.jsx)(g.default,{sx:{color:"white"},size:18}):"Skip and finish"})]})]})};var j=a(5565),b=a(18244),N=a(56595);let P=()=>{let[e,r]=(0,o.useState)(0),[a,{isLoading:d}]=(0,b.oq)(),[u,{isLoading:m}]=(0,N.UX)(),[c,{isLoading:h}]=(0,b.IM)(),[f]=(0,b.rU)(),[g,A]=(0,o.useState)({firstNameError:"",lastNameError:"",usernameError:"",emailError:"",passwordError:"",phoneError:"",profilePictureError:""}),[E,P]=(0,o.useState)({firstName:"",lastName:"",username:"",email:"",password:"",phone:"",profilePicture:null}),v=e=>{P({...E,[e.target.name]:e.target.value})},q=async()=>{if(""===E.firstName)A({...g,firstNameError:"First name must be filled",lastNameError:"",emailError:""});else if(""===E.lastName)A({...g,lastNameError:"Last name must be filled",firstNameError:"",emailError:""});else if(""===E.email)A({...g,emailError:"Your email is required",firstNameError:"",lastNameError:""});else if(E.email.includes("@")){if(""!==E.email&&""!==E.firstName&&""!==E.lastName){let e=await a(E.email);e.data.success?(A({...g,emailError:"",firstNameError:"",lastNameError:""}),k()):A({...g,emailError:e.data.message,firstNameError:"",lastNameError:""})}}else A({...g,emailError:"Your must write a correct format email",firstNameError:"",lastNameError:""})},C=async()=>{if(""===E.username)A({...g,usernameError:"Username must be filled",passwordError:"",phoneError:""});else if(E.username.match(/\d/)){if(E.username.match(/[a-z]/)){if(E.username.match(/[^a-zA-Z0-9]/)){if(""===E.password)A({...g,passwordError:"You need to create a password to secure your account",usernameError:"",phoneError:""});else if(""===E.phone)A({...g,phoneError:"Phone number is required",usernameError:"",passwordError:""});else if(""!==E.username&&""!==E.password&&""!==E.phone){let e=await c({firstName:E.firstName,phone:E.phone,username:E.username});e.data.success?(A({...g,usernameError:"",passwordError:"",phoneError:""}),k()):A({...g,usernameError:(0,t.jsxs)(t.Fragment,{children:[e.data.message," ",(0,t.jsx)("br",{}),(0,t.jsxs)("span",{style:{color:"green"},children:["Suggested username - ",e.data.data]})]}),passwordError:"",phoneError:""})}}else A({...g,usernameError:"Username must contain combinations of [a-z], [0-9] and ['-','.', '_' or '@']",passwordError:"",phoneError:""})}else A({...g,usernameError:"Username must contain combinations of [a-z], [0-9] and ['-','.', '_' or '@']",passwordError:"",phoneError:""})}else A({...g,usernameError:"Username must contain combinations of [a-z], [0-9] and ['-','.', '_' or '@']",passwordError:"",phoneError:""})},S=async()=>{let e=new FormData;e.append("image",E.profilePicture||"");let r=await u(e);await f({name:"".concat(E.firstName," ").concat(E.lastName),phone:E.phone,email:E.email,image:{image_url:r.data.image_url,public_id:r.data.public_id},username:E.username,password:E.password}),window.location.href="/login"},k=()=>r(e=>e+1),U=()=>r(e=>e-1);return(0,t.jsxs)(i.A,{children:[(0,t.jsxs)(s.default,{py:1,children:[(0,t.jsx)(j.default,{src:n.default,alt:"Logo",height:40,width:60}),(0,t.jsx)(l.A,{variant:"h5",fontWeight:"bold",children:"SIGN UP"})]}),(0,t.jsx)(p,{activeStep:e}),0===e&&(0,t.jsx)(x,{data:E,errorData:g,handleChange:v,checkBasicInfoAndMoveNext:q,isLoading:d}),1===e&&(0,t.jsx)(y,{data:E,errorData:g,handleChange:v,checkCredentialsAndMoveNext:C,prevStep:U,isLoading:h}),2===e&&(0,t.jsx)(w,{data:E,handleFileChange:e=>{e.target.files&&P({...E,profilePicture:e.target.files[0]})},handleSubmit:S,prevStep:U,isLoading:m})]})}},18244:(e,r,a)=>{"use strict";a.d(r,{DQ:()=>t.DQ,IM:()=>t.IM,Iq:()=>t.Iq,Ll:()=>t.Ll,R3:()=>t.R3,VY:()=>t.VY,_L:()=>t._L,gx:()=>t.gx,lJ:()=>t.lJ,og:()=>t.og,oq:()=>t.oq,qB:()=>t.qB,rU:()=>t.rU});var t=a(34120)},56595:(e,r,a)=>{"use strict";a.d(r,{Ar:()=>n,NB:()=>p,Qy:()=>g,UX:()=>c,W0:()=>s,d_:()=>i,sc:()=>l,t0:()=>h});var t=a(39295),o=a(30565);let i=(0,t.xP)({reducerPath:"postApi",baseQuery:(0,o.cw)({baseUrl:"http://localhost:3000"}),endpoints:e=>({login:e.mutation({query:e=>({url:"api/login",method:"POST",body:{email:e.email,password:e.password}})}),signup:e.mutation({query:e=>({url:"/api/signup",method:"POST",body:{email:e.email,password:e.password,name:e.name}})}),logout:e.mutation({query:()=>({url:"api/logout",method:"DELETE"})}),fetchPublicPostsData:e.query({query:()=>"api/get-all-posts"}),uploadImageToCloudinary:e.mutation({query:e=>({url:"https://chat-along-external-server.onrender.com/upload-to-cloudinary",method:"POST",body:e})}),deleteImageFromCloudinary:e.mutation({query:e=>({url:"https://chat-along-external-server.onrender.com/delete-from-cloudinary",method:"POST",body:{public_id:e}})}),createPost:e.mutation({query:e=>({url:"api/create-post",method:"POST",body:{post_image:e.post_image,caption:e.caption,date:e.date}})}),updateLink:e.mutation({query:e=>({url:"api/update-link",method:"PUT",body:{url:e.url,fullname:e.fullname,id:e.id,linkColor:e.linkColor}})}),deletePost:e.mutation({query:e=>({url:"api/delete-post",method:"DELETE",body:{postId:e}})}),likeUnlikePost:e.mutation({query:e=>({url:"api/like-unlike-post",method:"PUT",body:{postId:e}})}),commentPost:e.mutation({query:e=>({url:"api/comment-post",method:"POST",body:{postId:e.postId,comment:e.comment}})})})}),{useFetchPublicPostsDataQuery:s,useLikeUnlikePostMutation:l,useCommentPostMutation:n,useLoginMutation:d,useSignupMutation:u,useLogoutMutation:m,useUploadImageToCloudinaryMutation:c,useDeleteImageFromCloudinaryMutation:p,useCreatePostMutation:h,useUpdateLinkMutation:f,useDeletePostMutation:g}=i},34120:(e,r,a)=>{"use strict";a.d(r,{DQ:()=>l,IM:()=>u,Iq:()=>g,Ll:()=>s,R3:()=>p,VY:()=>A,_L:()=>n,dG:()=>i,gx:()=>E,lJ:()=>x,og:()=>h,oq:()=>d,qB:()=>y,rU:()=>m});var t=a(39295),o=a(30565);let i=(0,t.xP)({reducerPath:"usersApi",baseQuery:(0,o.cw)({baseUrl:"http://localhost:3000"}),endpoints:e=>({login:e.mutation({query:e=>({url:"api/login",method:"POST",body:{username:e.username,password:e.password}})}),checkEmailInDB:e.mutation({query:e=>({url:"api/check-email",method:"POST",body:{email:e}})}),checkUsernameInDB:e.mutation({query:e=>({url:"api/check-username",method:"POST",body:{firstName:e.firstName,phone:e.phone,username:e.username}})}),signup:e.mutation({query:e=>({url:"/api/signup",method:"POST",body:{email:e.email,password:e.password,name:e.name,image:e.image,username:e.username,phone:e.phone}})}),logout:e.mutation({query:()=>({url:"api/logout",method:"DELETE"})}),fetchUserData:e.query({query:()=>"api/get-user-profile"}),fetchAllUsersData:e.query({query:()=>"api/get-all-users"}),followUnfollowUser:e.mutation({query:e=>({url:"api/follow-unfollow-user",method:"PUT",body:{userId:e}})}),addStatus:e.mutation({query:e=>({url:"api/add-status",method:"POST",body:{statusContent:e.statusContent,colorCode:e.colorCode,colorName:e.colorName}})}),editProfile:e.mutation({query:e=>({url:"api/edit-user-profile",method:"PUT",body:{image:e.image,name:e.name,email:e.email,phone:e.phone}})}),deleteStatus:e.mutation({query:e=>({url:"api/delete-status",method:"DELETE",body:{statusId:e}})}),saveMessage:e.mutation({query:e=>({url:"api/save-message",method:"POST",body:{receiverId:e.receiverId,time:e.time,image:e.image,message:e.message}})}),clearMessages:e.mutation({query:e=>({url:"api/clear-messages",method:"POST",body:{receiverId:e}})}),saveNotification:e.mutation({query:e=>({url:"api/save-notification",method:"POST",body:{receiverId:e.receiverId,link:e.link,image:e.image,senderName:e.senderName,action:e.action}})}),clearNotifications:e.mutation({query:()=>({url:"api/clear-notifications",method:"PUT"})})})}),{useFetchUserDataQuery:s,useFetchAllUsersDataQuery:l,useLoginMutation:n,useCheckEmailInDBMutation:d,useCheckUsernameInDBMutation:u,useSignupMutation:m,useLogoutMutation:c,useFollowUnfollowUserMutation:p,useAddStatusMutation:h,useEditProfileMutation:f,useDeleteStatusMutation:g,useSaveMessageMutation:x,useClearMessagesMutation:y,useSaveNotificationMutation:A,useClearNotificationsMutation:E}=i},30960:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t={src:"/_next/static/media/logo.42f57a94.png",height:247,width:377,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAMFBMVEV08/9dqPder/Fhwrtgs+ZXn/Js/Elq/kZisPBn8Fx71elZ8Td15aR2/0lXnvxgw7O0au62AAAAEHRSTlMCYX15V0lgWzRFaSWEeXdfVWFWqwAAAAlwSFlzAAALEwAACxMBAJqcGAAAACpJREFUeJwlwYcNACAMBLHjk9DL/tsigQ3Q56BRPc7KuSCXzMxJzxZfxAURkgCioX2CTgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5}}},e=>{var r=r=>e(e.s=r);e.O(0,[7150,7089,2282,9295,1146,3894,280,3801,6578,2628,210,8441,1517,7358],()=>r(80774)),_N_E=e.O()}]);