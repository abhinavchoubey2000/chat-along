(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{84757:(e,t,i)=>{Promise.resolve().then(i.bind(i,22282)),Promise.resolve().then(i.bind(i,10979)),Promise.resolve().then(i.t.bind(i,87970,23)),Promise.resolve().then(i.t.bind(i,44839,23)),Promise.resolve().then(i.bind(i,30960)),Promise.resolve().then(i.bind(i,19499)),Promise.resolve().then(i.bind(i,71966)),Promise.resolve().then(i.bind(i,63281)),Promise.resolve().then(i.bind(i,56688)),Promise.resolve().then(i.bind(i,95723))},19499:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Post:()=>R});var n=i(95155),l=i(9552),a=i(12115),o=i(64665),s=i(63551),r=i(30562),d=i(34883),c=i(42479),u=i(9561),m=i(69841),h=i(54388),x=i(56595),p=i(83391),g=i(67882),j=i(71290),f=i(894),v=i(8707),A=i(36056),b=i(78416),y=i(36417),k=i(27753),_=i(75131),w=i(26214),I=i(22282),C=i(77159);function P(e){var t;let{id:i,image_public_id:l}=e,[o,s]=(0,a.useState)(null),r=!!o,d={"&:hover":{color:g.A["700"]}},c={"&:hover":{color:j.A["700"]}},[u,m]=(0,a.useState)(!1),P=(0,p.wA)(),{userData:S,isAuthenticated:D}=(0,p.d4)(e=>e.User),[z]=(0,x.Qy)(),[N]=(0,x.NB)(),q=()=>{s(null)},T=()=>{m(!0)},E=()=>{m(!1)},L=async()=>{await N(l),P((0,h.VA)(i)),await z(i),E()};return D&&(null==S?void 0:null===(t=S.posts)||void 0===t?void 0:t.find(e=>(null==e?void 0:e._id)===i))?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.A,{"aria-label":"settings",id:"basic-button","aria-controls":r?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":r?"true":void 0,onClick:e=>{s(e.currentTarget)},children:(0,n.jsx)(C.A,{})}),(0,n.jsxs)(v.A,{id:"basic-menu",anchorEl:o,open:r,onClose:q,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,n.jsx)(A.A,{onClick:()=>{q()},sx:d,children:"Edit Post"}),(0,n.jsx)(A.A,{sx:c,onClick:()=>{q(),T()},children:"Delete Post"})]}),(0,n.jsxs)(b.A,{open:u,onClose:E,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,n.jsx)(y.A,{id:"alert-dialog-title",children:"Delete post"}),(0,n.jsx)(k.A,{children:(0,n.jsx)(_.A,{id:"alert-dialog-description",children:"Are you sure you want to delete this post?"})}),(0,n.jsxs)(w.A,{children:[(0,n.jsx)(I.default,{onClick:E,children:"Cancel"}),(0,n.jsx)(I.default,{onClick:L,color:"error",autoFocus:!0,children:"Yes"})]})]})]}):null}var S=i(45933),D=i(38527),z=i(22293),N=i(71319),q=i(10979),T=i(68998),E=i(2241),L=i(12111),U=i(90507),O=i(280),F=i(11441),M=i(67396),Y=i(19347);function V(e){let{name:t,username:i,image:l}=e;return(0,n.jsx)(M.default,{href:"/".concat(i),style:{textDecoration:"none",color:"black"},children:(0,n.jsx)(q.default,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,px:2,py:1,sx:{"&:hover":{bgcolor:"#ededed",transition:"all 0.3s",cursor:"pointer"}},children:(0,n.jsxs)(q.default,{direction:"row",spacing:3,children:[(0,n.jsx)(r.A,{src:l,sx:{height:"3rem",width:"3rem"}}),(0,n.jsxs)(q.default,{children:[(0,n.jsx)(u.A,{children:i}),(0,n.jsx)(u.A,{variant:"caption",sx:{opacity:.7},children:t})]})]})})})}var Q=i(18244);let W=(0,N.Ay)("https://chat-along-external-server.onrender.com/");function B(e){var t;let{comments:i,likes:l,id:o,creatorId:s}=e,[d,c]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1),[j,v]=(0,a.useState)(""),{userData:A,isAuthenticated:y}=(0,p.d4)(e=>e.User),[_]=(0,x.sc)(),[w]=(0,x.Ar)(),I=(0,p.wA)(),[C]=(0,Q.VY)(),P=async()=>{if(y){if(await _(o),I((0,h.YH)({likesDetails:{_id:A._id||"",name:A.name||"",username:A.username||"",image:A.image||{image_url:"",public_id:""}},postId:o||""})),!l.find(e=>(null==e?void 0:e._id)===(null==A?void 0:A._id))){let e={senderId:A._id,senderName:A.name,senderImage:A.image,receiverId:s,action:"like",link:"/post/".concat(o)};W.off().emit("sendNotification",e),await C({senderName:A.name||"",image:A.image||{image_url:"",public_id:""},action:"like",link:"/post/".concat(o),receiverId:s})}}else I((0,Y.$m)(!0))},N=async()=>{await w({postId:o,comment:j});let e={_id:A._id||"",name:A.name||"",username:A.username||"",image:A.image||{image_url:"",public_id:""}};I((0,h.g$)({commentDetails:{comment:j,userId:e},postId:o})),v("");let t={senderId:A._id,senderName:A.name,senderImage:A.image,receiverId:s,action:"comment",link:"/post/".concat(o)};W.off().emit("sendNotification",t),await C({senderName:A.name||"",image:A.image||{image_url:"",public_id:""},action:"comment",link:"/post/".concat(o),receiverId:s})};return(0,n.jsxs)(q.default,{direction:"column",spacing:2,width:"100%",children:[(0,n.jsx)(b.A,{fullWidth:!0,open:m,onClose:()=>{g(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,n.jsx)(k.A,{children:(0,n.jsx)(T.A,{height:"80vh",children:0===l.length?(0,n.jsx)(u.A,{textAlign:"center",children:"No likes yet"}):null==l?void 0:l.map((e,t)=>(0,n.jsx)(V,{name:e.name,image:e.image.image_url,username:e.username},t))})})}),(0,n.jsxs)(q.default,{direction:"row",spacing:2,children:[(0,n.jsxs)(q.default,{direction:"column",spacing:0,justifyContent:"center",children:[(0,n.jsx)(f.A,{"aria-label":"Like",sx:{color:l.find(e=>(null==e?void 0:e._id)===(null==A?void 0:A._id))?"red":""},onClick:P,children:(0,n.jsx)(S.A,{})}),(0,n.jsx)(u.A,{variant:"caption",color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>{g(!0)},children:"".concat(l.length," ").concat(l.length>1?"Likes":"Like")})]}),(0,n.jsxs)(q.default,{direction:"column",spacing:0,justifyContent:"center",children:[(0,n.jsx)(f.A,{onClick:()=>{c(!d)},"aria-label":"comment",sx:{color:d?"#06D001":""},children:(0,n.jsx)(D.A,{})}),(0,n.jsxs)(u.A,{variant:"caption",color:"text.secondary",children:[i.length," Comments"]})]})]}),d&&(0,n.jsxs)(q.default,{spacing:2,mt:2,width:"100%",children:[(0,n.jsx)(E.A,{}),(0,n.jsx)(q.default,{spacing:2,direction:"column-reverse",height:"200px",overflow:"auto",children:i.map((e,t)=>(0,n.jsxs)(q.default,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(r.A,{src:e.userId.image.image_url,alt:e.userId.username,sx:{width:[30,40],height:[30,40]}}),(0,n.jsxs)(q.default,{children:[(0,n.jsx)(M.default,{href:"/".concat(e.userId.username),style:{textDecoration:"none",color:"black"},children:(0,n.jsx)(u.A,{sx:{fontSize:["0.7rem","0.8rem"]},fontWeight:"bold",children:e.userId.username})}),(0,n.jsx)(u.A,{sx:{fontSize:["0.7rem","0.8rem"]},children:e.comment})]})]},t))}),(0,n.jsx)(E.A,{}),y?(0,n.jsxs)(q.default,{direction:"row",spacing:[1,2],alignItems:"center",children:[(0,n.jsx)(r.A,{src:null===(t=A.image)||void 0===t?void 0:t.image_url,alt:"Logged in user",sx:{width:[40,50],height:[40,50]}}),(0,n.jsxs)(L.A,{variant:"outlined",fullWidth:!0,color:"secondary",children:[(0,n.jsx)(U.A,{htmlFor:"outlined-adornment-add-comment",children:"Add a comment"}),(0,n.jsx)(O.A,{id:"outlined-adornment-add-comment",type:"text",size:"small",value:j,onChange:e=>v(e.target.value),endAdornment:(0,n.jsx)(F.A,{position:"end",children:(0,n.jsx)(f.A,{"aria-label":"add-comment",onClick:N,edge:"end",children:(0,n.jsx)(z.A,{})})}),label:"Add a comment"})]})]}):null]})]})}function $(e){let{_id:t,creator:i,caption:l,post_image:a,comments:h,likes:x,date:p}=e;return(0,n.jsxs)(o.A,{sx:{width:["100%","30rem"],marginY:3},raised:!0,children:[(0,n.jsx)(s.A,{avatar:(0,n.jsx)(r.A,{src:null==i?void 0:i.image.image_url}),action:(0,n.jsx)(P,{id:t||"",image_public_id:(null==a?void 0:a.public_id)||""}),title:(0,n.jsx)(M.default,{href:"/".concat(null==i?void 0:i.username),style:{textDecoration:"none",color:"black"},children:null==i?void 0:i.name}),subheader:p}),(0,n.jsx)(d.A,{component:"img",width:200,height:400,image:null==a?void 0:a.image_url}),(0,n.jsx)(c.A,{children:(0,n.jsx)(u.A,{variant:"body2",sx:{color:"black"},children:l})}),(0,n.jsx)(m.A,{disableSpacing:!0,children:(0,n.jsx)(B,{likes:x||[],comments:h||[],id:t||"",creatorId:(null==i?void 0:i._id)||""})})]})}var H=i(12926);function R(){let{postsData:e}=(0,p.d4)(e=>e.Post);return(0,n.jsxs)(l.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",pb:10},children:[(0,n.jsx)(H.kb,{}),e.map((e,t)=>(0,n.jsx)($,{_id:e._id,creator:e.creator,likes:e.likes,comments:e.comments,caption:e.caption,post_image:e.post_image,date:e.date},t))]})}},71966:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Status:()=>k});var n=i(95155),l=i(12115),a=i(10979),o=i(30562),s=i(9561),r=i(8707),d=i(36056),c=i(44522),u=i(70424),m=i(10194),h=i(96854),x=i(6327),p=i(450),g=i(67396),j=i(83391),f=i(76046),v=i(19347),A=i(18244);function b(e){var t;let{statusArray:i,loggedInUserImage:b}=e,[y,k]=(0,l.useState)(null),_=(0,f.useRouter)(),w=(0,j.wA)(),[I,{isLoading:C}]=(0,A.Iq)(),[P,S]=(0,l.useState)(!1),[D,z]=(0,l.useState)(1),N=e=>{k(e.currentTarget)},q=()=>{k(null)},T=()=>{S(!0)},E=async e=>{await I(e),w((0,v.yQ)(e)),D>i.length-1&&z(Math.max(1,i.length-1))};return 0===i.length?(0,n.jsx)(g.default,{href:"/add-status",style:{textDecoration:"none",color:"black"},children:(0,n.jsxs)(a.default,{onClick:N,alignItems:"center",sx:{cursor:"pointer",pl:2},spacing:1,children:[(0,n.jsx)(o.A,{src:b,sx:{height:[40,70],width:[40,70]}}),(0,n.jsx)(s.A,{textAlign:"center",variant:"caption",children:"Add Status"})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.A,{id:"basic-menu",anchorEl:y,open:!!y,onClose:q,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,n.jsx)(d.A,{onClick:()=>{T(),q()},children:"View Status"}),(0,n.jsx)(d.A,{onClick:()=>{_.push("/add-status"),q()},children:"Add Status"})]}),(0,n.jsxs)(a.default,{onClick:N,alignItems:"center",sx:{cursor:"pointer",pr:2},children:[(0,n.jsx)(o.A,{src:b,sx:{height:70,width:70,border:0===i.length?"0":"2px solid #86d4ff"}}),(0,n.jsx)(s.A,{textAlign:"center",variant:"caption",children:"My Status"})]}),i.length>0&&(0,n.jsxs)(c.A,{sx:e=>{var t;return{color:"#fff",zIndex:e.zIndex.drawer+1,width:["100%","44%"],height:"100%",left:["-3.5%","26.8%"],bgcolor:(null===(t=i[D-1])||void 0===t?void 0:t.colorCode)||"#000",backdropFilter:"blur(2px)"}},open:P,children:[(0,n.jsxs)(a.default,{position:"fixed",top:0,children:[(0,n.jsxs)(a.default,{children:[(0,n.jsx)(u.A,{onClick:()=>{S(!1)},sx:{position:"fixed",top:5,right:5,boxShadow:"none",bgcolor:"transparent"},size:"small",color:"default",children:(0,n.jsx)(x.A,{fontSize:"small"})}),(0,n.jsx)(u.A,{onClick:()=>{var e;E(null===(e=i[D-1])||void 0===e?void 0:e._id)},sx:{position:"fixed",top:5,right:50,boxShadow:"none",bgcolor:"transparent"},size:"small",color:"default",children:(0,n.jsx)(p.A,{fontSize:"small"})})]}),(0,n.jsxs)(a.default,{position:"fixed",direction:"row",spacing:1,top:5,left:30,alignItems:"center",children:[(0,n.jsx)(o.A,{src:b,sx:{height:35,width:35}}),(0,n.jsxs)(a.default,{spacing:0,children:[(0,n.jsx)(s.A,{children:"You"}),(0,n.jsx)(s.A,{variant:"caption",sx:{opacity:.7},children:"2:33 PM"})]})]}),(0,n.jsx)(m.A,{count:i.length,page:D,onChange:(e,t)=>{z(t)},size:"small",onKeyUp:e=>{"left"===e.key?console.log("Left"):"right"===e.key&&console.log("Right")}})]}),C?(0,n.jsx)(h.default,{}):(0,n.jsx)(s.A,{sx:{fontSize:["2rem","3rem"]},textAlign:"center",children:(null===(t=i[D-1])||void 0===t?void 0:t.statusContent)||""})]})]})}function y(e){let{followings:t}=e,[i,r]=(0,l.useState)(!1),[d,h]=(0,l.useState)(1),[p,g]=(0,l.useState)([{_id:"",statusContent:"",colorCode:"",colorName:""}]),j=(e,t)=>{h(t)},f=()=>{r(!1)},v=e=>{console.log(e),g(e),r(!0)};return t.map((e,t)=>{var l;return(null===(l=e.status)||void 0===l?void 0:l.length)===0?null:(0,n.jsxs)("div",{children:[(0,n.jsxs)(a.default,{onClick:()=>{v(e.status||[])},alignItems:"center",sx:{cursor:"pointer"},spacing:1,children:[(0,n.jsx)(o.A,{src:e.image.image_url,sx:{height:[40,70],width:[40,70],border:"2px solid #06d001"}}),(0,n.jsx)(s.A,{textAlign:"center",variant:"caption",children:e.username})]}),(0,n.jsxs)(c.A,{sx:e=>({color:"#fff",zIndex:e.zIndex.drawer+1,width:["100%","44%"],height:"100%",left:["-3.5%","26.8%"],bgcolor:"".concat(p[d-1].colorCode),backdropFilter:"blur(2px)"}),open:i,children:[(0,n.jsxs)(a.default,{position:"fixed",top:0,children:[(0,n.jsx)(u.A,{onClick:f,sx:{position:"fixed",top:5,right:5,boxShadow:"none",bgcolor:"transparent"},size:"small",children:(0,n.jsx)(x.A,{fontSize:"small"})}),(0,n.jsxs)(a.default,{position:"fixed",direction:"row",spacing:1,top:5,left:30,alignItems:"center",children:[(0,n.jsx)(o.A,{src:e.image.image_url,sx:{height:35,width:35}}),(0,n.jsxs)(a.default,{spacing:0,children:[(0,n.jsx)(s.A,{children:e.name}),(0,n.jsx)(s.A,{variant:"caption",sx:{opacity:.7},children:"2:33 PM"})]})]}),(0,n.jsx)(m.A,{count:p.length,page:d,color:"primary",onChange:j,size:"large"})]}),(0,n.jsx)(s.A,{variant:"h2",textAlign:"center",children:p[d-1].statusContent})]})]},t)})}function k(){var e;let{isAuthenticated:t,userData:i}=(0,j.d4)(e=>e.User);return t?(0,n.jsxs)(a.default,{direction:"row",overflow:"auto",spacing:2,children:[(0,n.jsx)(b,{statusArray:i.status||[],loggedInUserImage:(null==i?void 0:null===(e=i.image)||void 0===e?void 0:e.image_url)||""}),(0,n.jsx)(y,{followings:i.following||[]})]}):null}},56595:(e,t,i)=>{"use strict";i.d(t,{Ar:()=>r,NB:()=>h,Qy:()=>g,UX:()=>m,W0:()=>o,d_:()=>a,sc:()=>s,t0:()=>x});var n=i(39295),l=i(30565);let a=(0,n.xP)({reducerPath:"postApi",baseQuery:(0,l.cw)({baseUrl:"http://localhost:3000"}),endpoints:e=>({login:e.mutation({query:e=>({url:"api/login",method:"POST",body:{email:e.email,password:e.password}})}),signup:e.mutation({query:e=>({url:"/api/signup",method:"POST",body:{email:e.email,password:e.password,name:e.name}})}),logout:e.mutation({query:()=>({url:"api/logout",method:"DELETE"})}),fetchPublicPostsData:e.query({query:()=>"api/get-all-posts"}),uploadImageToCloudinary:e.mutation({query:e=>({url:"https://chat-along-external-server.onrender.com/upload-to-cloudinary",method:"POST",body:e})}),deleteImageFromCloudinary:e.mutation({query:e=>({url:"https://chat-along-external-server.onrender.com/delete-from-cloudinary",method:"POST",body:{public_id:e}})}),createPost:e.mutation({query:e=>({url:"api/create-post",method:"POST",body:{post_image:e.post_image,caption:e.caption,date:e.date}})}),updateLink:e.mutation({query:e=>({url:"api/update-link",method:"PUT",body:{url:e.url,fullname:e.fullname,id:e.id,linkColor:e.linkColor}})}),deletePost:e.mutation({query:e=>({url:"api/delete-post",method:"DELETE",body:{postId:e}})}),likeUnlikePost:e.mutation({query:e=>({url:"api/like-unlike-post",method:"PUT",body:{postId:e}})}),commentPost:e.mutation({query:e=>({url:"api/comment-post",method:"POST",body:{postId:e.postId,comment:e.comment}})})})}),{useFetchPublicPostsDataQuery:o,useLikeUnlikePostMutation:s,useCommentPostMutation:r,useLoginMutation:d,useSignupMutation:c,useLogoutMutation:u,useUploadImageToCloudinaryMutation:m,useDeleteImageFromCloudinaryMutation:h,useCreatePostMutation:x,useUpdateLinkMutation:p,useDeletePostMutation:g}=a},54388:(e,t,i)=>{"use strict";i.d(t,{Aj:()=>a,Fn:()=>l,VA:()=>o,Vr:()=>n,YH:()=>s,g$:()=>r});let n=(0,i(72212).Z0)({name:"Post",initialState:{postsData:[],loading:!1},reducers:{storePublicPostDataInState:(e,t)=>{e.postsData=t.payload},deletePostFromState:(e,t)=>{e.postsData=e.postsData.filter(e=>e._id!==t.payload)},likeUnlikePostInState:(e,t)=>{var i,n,l,a,o;let s=e.postsData.find(e=>e._id===t.payload.postId);if(null==s?void 0:null===(i=s.likes)||void 0===i?void 0:i.find(e=>e._id===t.payload.likesDetails._id)){let i=null==s?void 0:null===(l=s.likes)||void 0===l?void 0:l.findIndex(e=>e._id===t.payload.likesDetails._id);null===(o=e.postsData.find(e=>e._id===t.payload.postId))||void 0===o||null===(a=o.likes)||void 0===a||a.splice(i||0,1)}else null==s||null===(n=s.likes)||void 0===n||n.push({_id:t.payload.likesDetails._id,image:t.payload.likesDetails.image,name:t.payload.likesDetails.name,username:t.payload.likesDetails.username})},commentPostInState:(e,t)=>{var i;let n=e.postsData.find(e=>e._id===t.payload.postId);null==n||null===(i=n.comments)||void 0===i||i.push({comment:t.payload.commentDetails.comment,userId:{name:t.payload.commentDetails.userId.name,_id:t.payload.commentDetails.userId._id,username:t.payload.commentDetails.userId.username,image:t.payload.commentDetails.userId.image}})},changeLoadingState:(e,t)=>{e.loading=t.payload}}}),{storePublicPostDataInState:l,changeLoadingState:a,deletePostFromState:o,likeUnlikePostInState:s,commentPostInState:r}=n.actions},56688:(e,t,i)=>{"use strict";i.r(t),i.d(t,{NotificationBadge:()=>d});var n=i(95155),l=i(12819),a=i(894),o=i(61651),s=i(83391),r=i(67396);function d(){var e;let{userData:t}=(0,s.d4)(e=>e.User);return(0,n.jsx)(r.default,{href:"/notification",children:(0,n.jsx)(a.A,{"area-label":"Open Notifications",size:"large",children:(0,n.jsx)(o.A,{badgeContent:null===(e=t.notifications)||void 0===e?void 0:e.length,color:"secondary",children:(0,n.jsx)(l.A,{sx:{fontSize:"1.5rem"}})})})})}i(12115)},12926:(e,t,i)=>{"use strict";i.d(t,{kb:()=>n.OverlayLogin}),i(63281);var n=i(95723)}},e=>{var t=t=>e(e.s=t);e.O(0,[7150,7089,7396,2282,9295,1146,3894,280,3801,6578,1800,2628,4313,145,2976,5596,1967,4632,6107,8441,1517,7358],()=>t(84757)),_N_E=e.O()}]);